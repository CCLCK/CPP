异常



错误码的缺点

![image-20220604170008160](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220604170008160.png)

异常对象可以带出更加丰富的错误信息  方便人处理错误和对错误进行处理

谁去处理异常？函数的直接或间接的调用者 

![image-20220604170148069](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220604170148069.png)



**try怎么去找catch**

未经处理的异常==未捕获到或者压根就没捕获



抛出的异常不像java一样抛出异常的具体类型  比如什么空的异常等等，(如果我们想抛出一个空异常得自己写一个类)而是抛出一个字符串，整形等等，然后catch里面给出一个对应类型来接收 接收到后就进行异常的处理



因为可以抛出各种各样的类型  所以带出的错误信息就很丰富了，比如抛出一个自定义的异常类型



抛出的异常对象出了作用域会被销毁



抛出一个不知道的异常 怎么处理？捕获一个任意类型的异常 

捕获的类型不一定要完全匹配 符合切片原则的也可以捕获



重新抛异常  带出来的问题可以用智能指针更好的处理

![image-20220604174407379](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220604174407379.png)

  



构造和析构最好都别抛异常 因为有点goto的意思

提倡定义函数的时候按异常规范声明清楚是否会抛异常，但是不强制



C++11 默认都抛异常 不抛异常就加个关键字 noexcept

![image-20220604183804633](https://pic-1304888003.cos.ap-guangzhou.myqcloud.com/img/image-20220604183804633.png)



自定义异常体系

继承+多态

父类去接收字类对象  所以多态可以达到谁抛出异常就打印谁的具体信息



C++提供的异常库



异常的优缺点--面试

相比错误码更加清晰准确

错误码与异常的对比  

错误码：谁调用谁检查谁处理

异常：谁调用，调用者和外层都可以捕获异常



当函数返回值是int时，如果要通过返回的错误码解决问题，不好处理 容易混淆

如果硬要处理就用指针。优雅的方式就是用异常

[错误处理 - 廖雪峰的官方网站 (liaoxuefeng.com)](https://www.liaoxuefeng.com/wiki/1016959663602400/1017598873256736#:~:text=错误处理. 在程序运行的过程中，如果发生了错误，可以事先约定返回一个错误代码，这样，就可以知道是否有错，以及出错的原因。. 在操作系统提供的调用中，返回错误码非常常见。. 比如打开文件的函数 open,() ，成功时返回文件描述符（就是一个整数），出错时返回 -1 。. 用错误码来表示是否出错十分不便，因为函数本身应该返回的正常结果和错误码混在一起，造成调用者必须用大量的代码来判断是否出错：. 一旦出错，还要一级一级上报，直到某个函数可以处理该错误（比如，给用户输出一个错误信息）。.)



缺点：跳来跳去 不好调试



